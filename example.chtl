<!DOCTYPE html>
<html>
<head>
    <title>Mature CHTL JS Showcase</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        nav a { margin-right: 15px; text-decoration: none; color: blue; }
        .page { display: none; border: 1px solid #ccc; padding: 20px; margin-top: 15px; }
        .box { width: 50px; height: 50px; background: steelblue; margin-top: 10px; }
    </style>
</head>
<body>
    <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
    </nav>

    <main>
        <div id="home-page" class="page">
            <h1>Home Page</h1>
            <p>Message: <b>$message$</b></p>
            <button id="animate-btn">Animate the Box</button>
            <div class="box"></div>
        </div>
        <div id="about-page" class="page">
            <h1>About Page</h1>
            <p>This is a showcase of the mature CHTL JS compiler.</p>
        </div>
    </main>

    <script>
// 1. Load external scripts
ScriptLoader {
    load: './utils.js';
};

// 2. Define a reusable virtual function with iNeverAway
Vir MyAnimations = iNeverAway {
    Pulse<Blue>: function(target) {
        Animate {
            target: target,
            duration: 800,
            easing: 'ease-in-out',
            direction: 'alternate',
            loop: 2,
            begin: { transform: 'scale(1)', background: 'steelblue' },
            end: { transform: 'scale(1.2)', background: 'royalblue' }
        };
    }
};

// 3. Define a responsive variable
let message = 'Welcome to the CHTL JS Showcase!';

// 4. Set up the router
Router {
    mode: 'history',
    url: '/',       page: {{#home-page}},
    url: '/about',  page: {{#about-page}}
};

// 5. Use event delegation to handle clicks
{{#home-page}}->Delegate {
    target: '#animate-btn',
    click: function(event) {
        const box = document.querySelector('.box');
        MyAnimations->Pulse<Blue>(box);
        message = 'Animation triggered!';
    }
};
    </script>
</body>
</html>